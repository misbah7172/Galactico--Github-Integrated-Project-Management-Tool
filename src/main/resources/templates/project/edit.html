<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Project - AutoTrack</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <!-- Header -->
  <header>
    <h1>AutoTrack</h1>
    <!-- Add nav here -->
  </header>

  <div class="container">
    <!-- Alert Messages -->
    <div class="alert alert-success" style="display: none;">Success message</div>
    <div class="alert alert-danger" style="display: none;">Error message</div>

    <!-- Page Header -->
    <div class="page-header">
      <div class="page-header-content">
        <div>
          <h1 class="page-title">‚öôÔ∏è Edit Project</h1>
          <p class="page-description">Update your project settings and GitHub repository connection</p>
        </div>
        <div class="page-actions">
          <a href="/projects/1" class="btn btn-secondary">
            <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
            Back to Project
          </a>
        </div>
      </div>
    </div>

    <!-- Edit Project Form -->
    <div class="form-container">
      <div class="form-card">
        <div class="form-header">
          <h2 class="form-title">Project Settings</h2>
          <p class="form-subtitle">Update your project details and GitHub repository configuration</p>
        </div>

        <form action="/projects/1/edit" method="post" class="form">
          <!-- Project Name -->
          <div class="form-group">
            <label for="name" class="form-label">Project Name *</label>
            <input type="text" id="name" name="name" class="form-control" 
                   placeholder="Enter a descriptive project name" required>
            <div class="form-error">Error for project name</div>
          </div>

          <!-- GitHub Repository URL -->
          <div class="form-group">
            <label for="gitHubRepoUrl" class="form-label">GitHub Repository URL *</label>
            <input type="url" id="gitHubRepoUrl" name="gitHubRepoUrl" class="form-control" 
                   placeholder="https://github.com/username/repository" required>
            <p class="form-help">
              üìã This URL is used for CI/CD pipeline integration and automated task tracking.
              <br>üîó <strong>Connect your repository to enable direct GitHub Actions deployment!</strong>
            </p>
            <div class="form-error">Error for repository URL</div>
          </div>

          <!-- GitHub Access Token -->
          <div class="form-group">
            <label for="gitHubAccessToken" class="form-label">
              GitHub Access Token <span class="token-status">‚ùå Not Set</span>
            </label>
            <div class="token-input-group">
              <input type="password" id="gitHubAccessToken" name="gitHubAccessToken" class="form-control" 
                     placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
              <button type="button" class="btn-toggle-token" onclick="toggleTokenVisibility()" title="Show/Hide Token">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </button>
            </div>
            <div class="token-help">
              <p class="form-help">
                üîë <strong>Required for direct GitHub Actions deployment!</strong>
                <br>üìù Create a <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">GitHub Personal Access Token</a> with <code>repo</code> and <code>actions</code> permissions.
                <br>‚ö†Ô∏è Keep this token secure - it grants access to your GitHub repository.
              </p>
              <div class="token-actions">
                <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="btn btn-link">
                  üîó Create New Token
                </a>
                <button type="button" class="btn btn-link" onclick="clearToken()" style="color: #dc3545;">
                  üóëÔ∏è Remove Token
                </button>
              </div>
            </div>
            <div class="form-error">Error for token</div>
          </div>

          <!-- Team Assignment -->
          <div class="form-group">
            <label for="teamId" class="form-label">Assigned Team</label>
            <select id="teamId" name="teamId" class="form-control">
              <option value="">-- No team assigned --</option>
              <option value="1">Team Alpha</option>
              <option value="2">Team Beta</option>
            </select>
            <p class="form-help">Team members can commit to this project and access CI/CD features.</p>
          </div>

          <!-- CI/CD Integration Info -->
          <div class="info-section">
            <div class="info-header">
              <h3 class="info-title">üöÄ CI/CD Integration</h3>
            </div>
            <div class="info-content">
              <p>After updating your GitHub repository URL, you can:</p>
              <ul>
                <li>‚úÖ Generate automated CI/CD pipelines</li>
                <li>‚úÖ Push workflows directly to GitHub Actions</li>
                <li>‚úÖ Monitor deployment status</li>
                <li>‚úÖ Track commit-based task progress</li>
              </ul>
              <div class="info-actions">
                <a href="/projects/1/cicd" class="btn btn-info">
                  <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="m8 12l-2-2-2 2 2 2 2-2zm8 0l2-2 2 2-2 2-2-2z"/>
                    <path d="M12 8V2m0 20v-6"/>
                  </svg>
                  Configure CI/CD
                </a>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              <svg class="btn-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                <polyline points="17,21 17,13 7,13 7,21"/>
                <polyline points="7,3 7,8 15,8"/>
              </svg>
              Update Project
            </button>
            <a href="/projects/1" class="btn btn-secondary">Cancel</a>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>¬© 2025 AutoTrack</p>
  </footer>

  <style>
    .info-section {
      background: linear-gradient(135deg, #f8f9ff 0%, #e8f4fd 100%);
      border: 1px solid #e1e8ed;
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }
    .info-title { color: #1a73e8; font-size: 1.1rem; font-weight: 600; margin: 0; }
    .info-content p { color: #5f6368; margin-bottom: 0.75rem; font-size: 0.95rem; }
    .info-content ul { color: #5f6368; font-size: 0.9rem; padding-left: 1rem; }
    .btn-info {
      background: linear-gradient(135deg, #1a73e8 0%, #1557b0 100%);
      color: white; border: none; padding: 0.6rem 1.2rem;
      border-radius: 8px; text-decoration: none; display: inline-flex;
      align-items: center; gap: 0.5rem; font-size: 0.9rem; font-weight: 500;
      transition: all 0.2s ease;
    }
    .btn-info:hover {
      background: linear-gradient(135deg, #1557b0 0%, #0f4389 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);
    }
    .token-status { color: #28a745; font-size: 0.8rem; font-weight: 500; }
    .token-status-missing { color: #dc3545; font-size: 0.8rem; font-weight: 500; }
    .token-input-group { position: relative; display: flex; align-items: center; }
    .token-input-group input { padding-right: 3rem; }
    .btn-toggle-token {
      position: absolute; right: 0.75rem; background: none;
      border: none; cursor: pointer; color: #6c757d; padding: 0.25rem;
    }
    .btn-toggle-token:hover { color: #495057; background-color: #f8f9fa; }
    .btn-link { background: none; border: none; color: #1a73e8; text-decoration: none; font-size: 0.9rem; cursor: pointer; }
    .btn-link:hover { color: #1557b0; text-decoration: underline; }
  </style>

  <script>
    function toggleTokenVisibility() {
      const tokenInput = document.getElementById('gitHubAccessToken');
      const button = document.querySelector('.btn-toggle-token');
      if (tokenInput.type === 'password') {
        tokenInput.type = 'text';
        button.title = 'Hide Token';
      } else {
        tokenInput.type = 'password';
        button.title = 'Show Token';
      }
    }
    function clearToken() {
      if (confirm('Are you sure you want to remove the GitHub access token?')) {
        document.getElementById('gitHubAccessToken').value = '';
        document.getElementById('gitHubAccessToken').focus();
      }
    }
  </script>
</body>
</html>
